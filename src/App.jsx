import { Suspense, useState, useTransition } from 'react';
import HomePage from './pages/Home/Home'
import Layout from './layout/Layout';

export default function App() {
  return (
    <Suspense fallback={<BigSpinner />}>
      <Router />
    </Suspense>
  );
}

function Router() {
  const [page, setPage] = useState('/');
  const [isPending, startTransition] = useTransition();

  function navigate(url) {
    startTransition(() => {
      setPage(url);
    });
  }

  let content;
  if (page === '/') {
    content = (
      <HomePage navigate={navigate} />
    );
  } 
  return (
    <Layout isPending={isPending}>
      {content}
    </Layout>
  );
}

function BigSpinner() {
  return <h2>ðŸŒ€ Loading...</h2>;
}